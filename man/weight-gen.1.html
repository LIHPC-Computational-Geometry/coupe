<!DOCTYPE html>
<html>
<!-- This is an automatically generated file.  Do not edit.
   Generated by scdoc 1.11.2
   Complete documentation for this program is not available as a GNU info page
 -->
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <link rel="stylesheet" href="man.css" type="text/css" media="all"/>
  <title>weight-gen(1)</title>
</head>
<body>
<table class="head">
  <tr>
    <td class="head-ltitle">weight-gen(1)</td>
    <td class="head-vol">General Commands Manual</td>
    <td class="head-rtitle">weight-gen(1)</td>
  </tr>
</table>
<div class="manual-text">
<section class="Sh">
<h1 class="Sh" id="NAME"><a class="permalink" href="#NAME">NAME</a></h1>
<p class="Pp">weight-gen - Generate a distribution of weights for a given
  mesh</p>
</section>
<section class="Sh">
<h1 class="Sh" id="SYNOPSIS"><a class="permalink" href="#SYNOPSIS">SYNOPSIS</a></h1>
<p class="Pp"><b>weight-gen</b> [options...] [input.mesh [output.weights]]</p>
</section>
<section class="Sh">
<h1 class="Sh" id="DESCRIPTION"><a class="permalink" href="#DESCRIPTION">DESCRIPTION</a></h1>
<p class="Pp">weight-gen generates weights for a given mesh.</p>
<p class="Pp">If input.mesh is omitted or is -, it is read from standard input.
    If output.weights is omitted or is -, it is written to standard output.</p>
<p class="Pp">Unless <b>-i, --integers</b> is specified, the generated weights
    are floating-point numbers.</p>
<p class="Pp">Only some specific mesh formats are supported. See
    <a href="apply-part.1.html"><b>apply-part</b>(1)</a>'s <b>INPUT</b> <b>FORMAT</b> for details.</p>
<p class="Pp">See <b>WEIGHT FILE</b> for a description of the output format.</p>
</section>
<section class="Sh">
<h1 class="Sh" id="OPTIONS"><a class="permalink" href="#OPTIONS">OPTIONS</a></h1>
<p class="Pp"><b>-h, --help</b></p>
<div class="Bd-indent">Show a help message and exit.</div>
<p class="Pp"><b>--version</b></p>
<div class="Bd-indent">Show version information and exit.</div>
<p class="Pp"><b>-d, --distribution</b> &lt;spec&gt;</p>
<div class="Bd-indent">Required. The definition of a weight distribution. This
  option must be specified once per criterion. See <b>DISTRIBUTION FORMAT</b>
  and <b>SUPPORTED</b> <b>DISTRIBUTIONS</b> for more information.</div>
<p class="Pp"><b>-i, --integers</b></p>
<div class="Bd-indent">Truncate weights and generate an integer weight
  distribution instead.</div>
</section>
<section class="Sh">
<h1 class="Sh" id="DISTRIBUTION_FORMAT"><a class="permalink" href="#DISTRIBUTION_FORMAT">DISTRIBUTION
  FORMAT</a></h1>
<p class="Pp">The option <b>-d, --distribution</b> defines how input weights are
    laid out. It can be specified multiple times, one for each criterion. Its
    value must follow the following syntax:</p>
<p class="Pp"></p>
<div class="Bd-indent">
<pre>distribution  :=  name *( &quot;,&quot; param)
param         :=  value / axis
name          :=  STRING
value         :=  FLOAT
axis          :=  &quot;x&quot; / &quot;y&quot; / &quot;z&quot; / &quot;0&quot; / &quot;1&quot; / &quot;2&quot;</pre>
</div>
<p class="Pp">For example, the following will lay out weights in ascending order
    on the horizontal (X, abscissa) axis, from 0 to 100:</p>
<p class="Pp"></p>
<div class="Bd-indent">weight-gen --distribution linear,x,0,100</div>
<p class="Pp">And the following example shows how to form a spike of height 4.2
    at the origin:</p>
<p class="Pp"></p>
<div class="Bd-indent">weight-gen --distribution spike,4.2,0,0</div>
</section>
<section class="Sh">
<h1 class="Sh" id="SUPPORTED_DISTRIBUTIONS"><a class="permalink" href="#SUPPORTED_DISTRIBUTIONS">SUPPORTED
  DISTRIBUTIONS</a></h1>
<p class="Pp">The following distributions are supported:</p>
<p class="Pp"><b>constant</b>,VALUE</p>
<div class="Bd-indent">Set all weights to be equal to the given VALUE.</div>
<p class="Pp"><b>linear</b>,AXIS,FROM,TO</p>
<div class="Bd-indent">Weights follow a linear slope on the given axis, where
  the points at the lowest coordinate on that axis are assigned the value FROM,
  and the one at the highest coordinate are assigned the value TO.</div>
<p class="Pp"><b>spike</b>,HEIGHT,POSITION,...</p>
<div class="Bd-indent">Weights form a spike of the given height at the given
  position. The spike has an exponential shape: weights are of the order of
  <i>exp(-d)</i> where <i>d</i> is the distance between the element and the
  center of the mesh. Multiple spikes can be specified.</div>
</section>
<section class="Sh">
<h1 class="Sh" id="WEIGHT_FILE"><a class="permalink" href="#WEIGHT_FILE">WEIGHT
  FILE</a></h1>
<p class="Pp">A weight file is a binary file that consists of a header followed
    by a list of weights, which can either be integers or floating points. Below
    is the ABNF representation of the file:</p>
<p class="Pp"></p>
<div class="Bd-indent">
<pre>file            = magic version flags criterion-count weight-count weights
magic           = %x4d %x65 %x57 %x65  ; &quot;MeWe&quot;
version         = %x01                 ; Version 1
flags           = %x00-FF              ; see the Flags paragraph
criterion-count = U16                  ; Number of criteria
weight-count    = U64                  ; Number of weights per criterion
weights         = *I64 / *F64          ; criterion-count times weight-count weights</pre>
</div>
<p class="Pp">Some notes:</p>
<p class="Pp"></p>
<div class="Bd-indent">&#x2022;Weights are laid out as weight-count arrays of
  criterion-count items.</div>
<div class="Bd-indent">&#x2022;<i>U16</i> is a little-endian 2-byte unsigned
  integer.</div>
<div class="Bd-indent">&#x2022;<i>U64</i> is a little-endian 8-byte unsigned
  integer.</div>
<div class="Bd-indent">&#x2022;<i>I64</i> is a little-endian 8-byte signed
  integer.</div>
<div class="Bd-indent">&#x2022;<i>F64</i> is a little-endian-encoded binary64
  IEEE 754-2008 floating point.
<p class="Pp"></p>
</div>
<p class="Pp">The <i>flags</i> byte has the following meaning, from the least
    significant bit to the most:</p>
<p class="Pp"></p>
<div class="Bd-indent">&#x2022;The first bit is 1 if weights are integers
  (<i>I64</i>), or 0 if weights are floats (<i>F64</i>),</div>
<div class="Bd-indent">&#x2022;The other bits are left unspecified.
<p class="Pp"></p>
</div>
</section>
<section class="Sh">
<h1 class="Sh" id="SEE_ALSO"><a class="permalink" href="#SEE_ALSO">SEE
  ALSO</a></h1>
<p class="Pp"><a href="mesh-part.1.html"><b>mesh-part</b>(1)</a></p>
</section>
<section class="Sh">
<h1 class="Sh" id="AUTHORS"><a class="permalink" href="#AUTHORS">AUTHORS</a></h1>
<p class="Pp">This executable is part of coupe, which is maintained by Hubert
    Hirtz &lt;hubert@hirtz.pm&gt; under the direction of Franck Ledoux
    &lt;franck.ledoux@cea.fr&gt; and the supervision of C&#x00E9;dric Chevalier
    &lt;cedric.chevalier@cea.fr&gt; and S&#x00E9;bastien Morais
    &lt;sebastien.morais@cea.fr&gt;.</p>
<p class="Pp">For more information on coupe development, see
    &lt;https://github.com/LIHPC-Computational-Geometry/coupe&gt;.</p>
</section>
</div>
<table class="foot">
  <tr>
    <td class="foot-date">2024-02-06</td>
    <td class="foot-os"></td>
  </tr>
</table>
</body>
</html>
